---
import BaseLayout from "@/layouts/BaseLayout.astro";
import Container from "@/components/astro/Container.astro";
import Card from "@/components/astro/Card/Card.astro";
import CardHeader from "@/components/astro/Card/CardHeader.astro";
import CardContent from "@/components/astro/Card/CardContent.astro";
import CardFooter from "@/components/astro/Card/CardContent.astro";
import Link from "@/components/astro/Link.astro";

import SignIn from "@/components/react/Auth/SignIn.tsx";

const { cookies, redirect } = Astro;

const accessToken = cookies.get("sb-access-token");
const refreshToken = cookies.get("sb-refresh-token");

if (accessToken && refreshToken) {
  return redirect("/");
}
---

<BaseLayout title=" | Sign in">
  <Container>
    <div class="flex w-full justify-center">
      <Card class="w-80">
        <CardHeader>
          <h2 class="text-center text-2xl font-bold leading-9 tracking-tight">
            Sign in to your account
          </h2>
        </CardHeader>

        <CardContent>
          <SignIn client:load />
        </CardContent>

        <CardFooter>
          <p class="text-center text-sm">
            New here?
            <Link href="/register">Register</Link>
          </p>
        </CardFooter>
      </Card>
    </div>
  </Container>
</BaseLayout>
